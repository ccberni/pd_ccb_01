/*
 * File: lpf_i3.c
 *
 * MATLAB Coder version            : 2.8
 * C/C++ source code generated on  : 11-Jul-2022 20:55:10
 */

/* Include Files */
#include "rt_nonfinite.h"
#include "lpf_i3.h"

/* Type Definitions */
#ifndef struct_dsp_FIRFilter_1
#define struct_dsp_FIRFilter_1

struct dsp_FIRFilter_1
{
  int S0_isInitialized;
  double W0_states[347];
  double P0_InitialStates;
  double P1_Coefficients[348];
};

#endif                                 /*struct_dsp_FIRFilter_1*/

#ifndef typedef_dsp_FIRFilter_1
#define typedef_dsp_FIRFilter_1

typedef struct dsp_FIRFilter_1 dsp_FIRFilter_1;

#endif                                 /*typedef_dsp_FIRFilter_1*/

#ifndef typedef_dspcodegen_FIRFilter
#define typedef_dspcodegen_FIRFilter

typedef struct {
  int isInitialized;
  dsp_FIRFilter_1 cSFunObject;
  boolean_T c_NoTuningBeforeLockingCodeGenE;
} dspcodegen_FIRFilter;

#endif                                 /*typedef_dspcodegen_FIRFilter*/

/* Variable Definitions */
static dspcodegen_FIRFilter Hd;
static boolean_T Hd_not_empty;

/* Function Definitions */

/*
 * Arguments    : void
 * Return Type  : void
 */
void Hd_not_empty_init_i3(void)
{
  Hd_not_empty = false;
}

/*
 * LPF_V2 Filters input x and returns output y.
 * Arguments    : double x
 * Return Type  : double
 */
double lpf_i3(double x)
{
  double y;
  dspcodegen_FIRFilter *obj;
  int i;
  static const double dv0[348] = { -0.000436113593675965, 8.78463598837888E-5,
    9.56452464962856E-5, 0.00010972592710203, 0.000125245764175807,
    0.000137414938961921, 0.000141616910701835, 0.000134494111979153,
    0.00011397886333546, 8.01930741321118E-5, 3.50552014549593E-5,
    -1.72334600755629E-5, -7.12304953523574E-5, -0.000120159114291163,
    -0.000157576741642081, -0.000177291645432922, -0.000175524270322292,
    -0.000150184307774668, -0.000101897573540722, -3.70780507942249E-5,
    4.0268772842507E-5, 0.000119879982357645, 0.000191790533820093,
    0.000245731276642666, 0.000273472992176722, 0.00026897037605346,
    0.000230197592074348, 0.000159005634632204, 6.19106188609795E-5,
    -5.10255596194268E-5, -0.000166561255192211, -0.00027038382943923,
    -0.000348184157019774, -0.00038825245494224, -0.000382293828384413,
    -0.000327762806027107, -0.000227840483211246, -9.13026921716253E-5,
    6.66318148471332E-5, 0.000227976312611543, 0.000372602820147057,
    0.000481140851688359, 0.000537185191165681, 0.000529996673627827,
    0.00045595440390934, 0.000319756284956828, 0.000134133724920399,
    -8.0958672194561E-5, -0.000300637178951202, -0.000497619047327014,
    -0.000645819350412745, -0.000723344491156619, -0.000716007751697028,
    -0.000619022732945217, -0.000438742888195684, -0.000192452942292187,
    9.36305621175093E-5, 0.000386190401506191, 0.000649203971144403,
    0.000848047325339646, 0.000954092947738312, 0.000948396396419522,
    0.000824865269123296, 0.000591637580846619, 0.000271102119126511,
    -0.000102233345312484, -0.00048514056391097, -0.000830756759730329,
    -0.00109398001235513, -0.00123746532713749, -0.00123635955921184,
    -0.00108257090181958, -0.000786278197667723, -0.000375946952619889,
    0.00010404840187332, 0.000598402340254578, 0.00104684356107713,
    0.0013914032981285, 0.00158369297021266, 0.00159154303708173,
    0.0014037899207745, 0.0010328513641253, 0.000514408111072473,
    -9.56603940790598E-5, -0.000727176775968787, -0.00130346338637878,
    -0.00175058736543439, -0.00200648109252769, -0.00202946038806171,
    -0.00180413827941097, -0.00134505362320907, -0.000696243286479644,
    7.26347624237801E-5, 0.000873362016748245, 0.00160918924033542,
    0.00218627178593254, 0.00252536662032155, 0.00257227490625767,
    0.00230586375239501, 0.00174237551095061, 0.00093540713920295,
    -2.87830709897017E-5, -0.00104010607434769, -0.00197697571319803,
    -0.00272053395051655, -0.00316946550749611, -0.00325316371662024,
    -0.00294221367946822, -0.00225386658306897, -0.00125257073418919,
    -4.4496681015835E-5, 0.00123331253593602, 0.00242802212510934,
    0.00338882148629978, 0.00398548307220715, 0.00412535643875582,
    0.00376666014209006, 0.00292625657922891, 0.00168076036327632,
    0.000160435921134117, -0.00146377987399102, -0.0029988421073093,
    -0.00425190818556205, -0.00505373771971384, -0.0052806523518628,
    -0.00487193437719689, -0.00384093871163196, -0.00227751066810111,
    -0.000341543692164352, 0.00175231983252469, 0.00375747058477256,
    0.00542328736039055, 0.00652512232395215, 0.00689297452545175,
    0.00643530258508036, 0.0051549408597806, 0.00315462639914515,
    0.000631012590169254, -0.00214284347129158, -0.00484517828127494,
    -0.00714071087032935, -0.00871975928835254, -0.00933682122442697,
    -0.0088443668808547, -0.0072171861652654, -0.00456446120153698,
    -0.00112688493461009, 0.00274152237954394, 0.0066059604776272,
    0.00999494740935193, 0.0124519653680996, 0.0135892789340116,
    0.0131382898199242, 0.0109905789892527, 0.00722486410289237,
    0.00211587267910782, -0.00387679099172179, -0.0101398605059073,
    -0.0159556466230293, -0.0205652464628376, -0.0232401351158226,
    -0.0233552401871364, -0.0204565968443466, -0.0143162345425944,
    -0.00496875675533626, 0.00727493265162226, 0.0218388228867346,
    0.0379178522189561, 0.0545360560945701, 0.0706221299982608,
    0.0850956688852716, 0.0969565162702444, 0.1053687373865, 0.109731745943659,
    0.109731745943659, 0.1053687373865, 0.0969565162702444, 0.0850956688852716,
    0.0706221299982608, 0.0545360560945701, 0.0379178522189561,
    0.0218388228867346, 0.00727493265162226, -0.00496875675533626,
    -0.0143162345425944, -0.0204565968443466, -0.0233552401871364,
    -0.0232401351158226, -0.0205652464628376, -0.0159556466230293,
    -0.0101398605059073, -0.00387679099172179, 0.00211587267910782,
    0.00722486410289237, 0.0109905789892527, 0.0131382898199242,
    0.0135892789340116, 0.0124519653680996, 0.00999494740935193,
    0.0066059604776272, 0.00274152237954394, -0.00112688493461009,
    -0.00456446120153698, -0.0072171861652654, -0.0088443668808547,
    -0.00933682122442697, -0.00871975928835254, -0.00714071087032935,
    -0.00484517828127494, -0.00214284347129158, 0.000631012590169254,
    0.00315462639914515, 0.0051549408597806, 0.00643530258508036,
    0.00689297452545175, 0.00652512232395215, 0.00542328736039055,
    0.00375747058477256, 0.00175231983252469, -0.000341543692164352,
    -0.00227751066810111, -0.00384093871163196, -0.00487193437719689,
    -0.0052806523518628, -0.00505373771971384, -0.00425190818556205,
    -0.0029988421073093, -0.00146377987399102, 0.000160435921134117,
    0.00168076036327632, 0.00292625657922891, 0.00376666014209006,
    0.00412535643875582, 0.00398548307220715, 0.00338882148629978,
    0.00242802212510934, 0.00123331253593602, -4.4496681015835E-5,
    -0.00125257073418919, -0.00225386658306897, -0.00294221367946822,
    -0.00325316371662024, -0.00316946550749611, -0.00272053395051655,
    -0.00197697571319803, -0.00104010607434769, -2.87830709897017E-5,
    0.00093540713920295, 0.00174237551095061, 0.00230586375239501,
    0.00257227490625767, 0.00252536662032155, 0.00218627178593254,
    0.00160918924033542, 0.000873362016748245, 7.26347624237801E-5,
    -0.000696243286479644, -0.00134505362320907, -0.00180413827941097,
    -0.00202946038806171, -0.00200648109252769, -0.00175058736543439,
    -0.00130346338637878, -0.000727176775968787, -9.56603940790598E-5,
    0.000514408111072473, 0.0010328513641253, 0.0014037899207745,
    0.00159154303708173, 0.00158369297021266, 0.0013914032981285,
    0.00104684356107713, 0.000598402340254578, 0.00010404840187332,
    -0.000375946952619889, -0.000786278197667723, -0.00108257090181958,
    -0.00123635955921184, -0.00123746532713749, -0.00109398001235513,
    -0.000830756759730329, -0.00048514056391097, -0.000102233345312484,
    0.000271102119126511, 0.000591637580846619, 0.000824865269123296,
    0.000948396396419522, 0.000954092947738312, 0.000848047325339646,
    0.000649203971144403, 0.000386190401506191, 9.36305621175093E-5,
    -0.000192452942292187, -0.000438742888195684, -0.000619022732945217,
    -0.000716007751697028, -0.000723344491156619, -0.000645819350412745,
    -0.000497619047327014, -0.000300637178951202, -8.0958672194561E-5,
    0.000134133724920399, 0.000319756284956828, 0.00045595440390934,
    0.000529996673627827, 0.000537185191165681, 0.000481140851688359,
    0.000372602820147057, 0.000227976312611543, 6.66318148471332E-5,
    -9.13026921716253E-5, -0.000227840483211246, -0.000327762806027107,
    -0.000382293828384413, -0.00038825245494224, -0.000348184157019774,
    -0.00027038382943923, -0.000166561255192211, -5.10255596194268E-5,
    6.19106188609795E-5, 0.000159005634632204, 0.000230197592074348,
    0.00026897037605346, 0.000273472992176722, 0.000245731276642666,
    0.000191790533820093, 0.000119879982357645, 4.0268772842507E-5,
    -3.70780507942249E-5, -0.000101897573540722, -0.000150184307774668,
    -0.000175524270322292, -0.000177291645432922, -0.000157576741642081,
    -0.000120159114291163, -7.12304953523574E-5, -1.72334600755629E-5,
    3.50552014549593E-5, 8.01930741321118E-5, 0.00011397886333546,
    0.000134494111979153, 0.000141616910701835, 0.000137414938961921,
    0.000125245764175807, 0.00010972592710203, 9.56452464962856E-5,
    8.78463598837888E-5, -0.000436113593675965 };

  dsp_FIRFilter_1 *b_obj;
  double acc2;
  double acc1;

  /*  MATLAB Code */
  /*  Generated by MATLAB(R) 8.5 and the DSP System Toolbox 9.0. */
  /*  Generated on: 08-Jul-2022 16:28:14 */
  /*  To generate C/C++ code from this function use the codegen command. */
  /*  Type 'help codegen' for more information. */
  if (!Hd_not_empty) {
    /*  The following code was used to design the filter coefficients: */
    /*  */
    /*  Fpass = 50;    % Passband Frequency */
    /*  Fstop = 60;    % Stopband Frequency */
    /*  Apass = 0.01;  % Passband Ripple (dB) */
    /*  Astop = 60;    % Stopband Attenuation (dB) */
    /*  Fs    = 1000;  % Sampling Frequency */
    /*  */
    /*  h = fdesign.lowpass('fp,fst,ap,ast', Fpass, Fstop, Apass, Astop, Fs); */
    /*  */
    /*  Hd = design(h, 'equiripple', ... */
    /*      'MinOrder', 'any', ... */
    /*      'StopbandShape', 'flat', ... */
    /*      'SystemObject', true); */
    obj = &Hd;
    Hd.isInitialized = 0;
    Hd.c_NoTuningBeforeLockingCodeGenE = true;

    /* System object Constructor function: dsp.FIRFilter */
    obj->cSFunObject.P0_InitialStates = 0.0;
    for (i = 0; i < 348; i++) {
      obj->cSFunObject.P1_Coefficients[i] = dv0[i];
    }

    /* System object Initialization function: dsp.FIRFilter */
    for (i = 0; i < 347; i++) {
      obj->cSFunObject.W0_states[i] = obj->cSFunObject.P0_InitialStates;
    }

    for (i = 0; i < 348; i++) {
      obj->cSFunObject.P1_Coefficients[i] = dv0[i];
    }

    Hd.c_NoTuningBeforeLockingCodeGenE = false;
    Hd_not_empty = true;
  }

  if (Hd.isInitialized != 1) {
    Hd.isInitialized = 1;
    Hd.c_NoTuningBeforeLockingCodeGenE = true;
  }

  b_obj = &Hd.cSFunObject;

  /* System object Outputs function: dsp.FIRFilter */
  /* Consume delay line and beginning of input samples */
  acc2 = x * b_obj->P1_Coefficients[0];
  acc1 = acc2;
  for (i = 0; i < 347; i++) {
    acc2 = b_obj->W0_states[i] * b_obj->P1_Coefficients[i + 1];
    acc1 += acc2;
  }

  y = acc1;

  /* Update delay line for next frame */
  for (i = 345; i > -1; i += -1) {
    b_obj->W0_states[1 + i] = b_obj->W0_states[i];
  }

  b_obj->W0_states[0] = x;
  return y;
}

/*
 * File trailer for lpf_i3.c
 *
 * [EOF]
 */
